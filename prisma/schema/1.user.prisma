model AuthenticationModel {
  id               String  @id
  oauth_sub        String
  oauth_type       String
  business_user_id String?
  customer_id      String?

  business_user BusinessUserModel? @relation(fields: [business_user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  customer      CustomerModel?     @relation(fields: [customer_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([oauth_sub, oauth_type])
  @@map("authentications")
}

model UserModel {
  id             String  @id
  name           String
  email          String?
  email_verified Boolean
  phone          String?
  phone_verified Boolean
  address_first  String?
  address_second String?
  profile_image  String?

  customer       CustomerModel?
  business_user  BusinessUserModel?
  board_articles BoardArticleModel[]
  board_comments BoardCommentModel[]

  @@map("users")
}

model CustomerModel {
  id     String  @id
  birth  String?
  gender String?

  user            UserModel             @relation(fields: [id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  authentications AuthenticationModel[]
  rates           BusinessRateModel[]
  reviews         BusinessReviewModel[]

  @@map("customers")
}

model BusinessUserModel {
  id                   String  @id
  is_verified          Boolean
  introduction_title   String
  introduction_content String

  user              UserModel             @relation(fields: [id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  authentications   AuthenticationModel[]
  real_estate_agent RealEstateAgentModel?
  home_care_company HomeCareCompanyModel?
  rates             BusinessRateModel[]
  reviews           BusinessReviewModel[]

  @@map("business_users")
}

model RealEstateAgentModel {
  id                   String  @id
  is_licensed          Boolean
  real_estate_num      String
  real_estate_name     String
  real_estate_phone    String
  licensed_agent_name  String
  specialized_field_id String?

  business          BusinessUserModel                   @relation(fields: [id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  specialized_field RealEstateSpecializedSubFieldModel? @relation(fields: [specialized_field_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  properties        RealEstatePropertyModel[]

  @@map("real_estate_agents")
}

model HomeCareCompanyModel {
  id                        String  @id
  business_registration_num String
  specialized_field_id      String?

  business            BusinessUserModel                 @relation(fields: [id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  specialized_field   HomeCareSpecializedSubFieldModel? @relation(fields: [specialized_field_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  introduction_images HomeCareIntroductionImageModel[]

  @@map("home_care_companies")
}

model HomeCareIntroductionImageModel {
  id         String @id
  image_url  String
  company_id String

  company HomeCareCompanyModel @relation(fields: [company_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@map("home_care_introduction_images")
}
